<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ClientMobileApp.ViewModels"
             xmlns:services="clr-namespace:ClientMobileApp.Services"
             x:Class="ClientMobileApp.Pages.LoginPage" 
             NavigationPage.HasNavigationBar="False"
             >
    <ContentPage.BindingContext>
        <vm:LoginViewModel>
            <x:Arguments>
                <services:UserHttpService/>
            </x:Arguments>
        </vm:LoginViewModel>
    </ContentPage.BindingContext>
    <Grid Padding="10,0" RowDefinitions="Auto,*,Auto,Auto,Auto,Auto,Auto,*,Auto" ColumnDefinitions="*,*" ColumnSpacing="5" RowSpacing="5"
          IsEnabled="True">
        <Picker Grid.Row="0" Grid.Column="0" SelectedIndex="{Binding AppCultureCode}" Title="{Binding LocalizedTexts.P01UI00}" HorizontalTextAlignment="Center"
                FontAttributes="Bold" FontSize="16" SelectedIndexChanged="PickerIndexChanged"
                TextColor="Blue">
            <Picker.Items>
                <x:String>üá∑üá∫ –†—É—Å—Å–∫–∏–π</x:String>
                <x:String>üá∫üáø O'zbek tili</x:String>
            </Picker.Items>
        </Picker>

        <Button Grid.Row="0" Grid.Column="1" Text="{Binding LocalizedTexts.P01UI01}" VerticalOptions="End" Margin="0,0,0,5"
                FontAttributes="Bold" BackgroundColor="Transparent" TextColor="Blue" FontSize="15" IsEnabled="{Binding IsEnabled}"
                Command="{Binding SkipAuthorizationCommand}">
            <Button.Shadow>
                <Shadow Brush="Black" Radius="5" Offset="0,0" Opacity="0.5"/>
            </Button.Shadow>
        </Button>

        <Image Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" VerticalOptions="Center"
            Source="company_logo.png"/>

        <Label Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding LocalizedTexts.P01UI02}" FontAttributes="Bold" 
               FontSize="16" Margin="0,15,0,0"/>

        <Entry Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Placeholder="{Binding LocalizedTexts.P01UI03}"
               FontSize="16" ReturnType="Next" Text="{Binding Username}"/>

        <Label Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding LocalizedTexts.P01UI04}" FontAttributes="Bold" 
               FontSize="16" />

        <Entry Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2" Placeholder="{Binding LocalizedTexts.P01UI05}"
               FontSize="16" IsPassword="{Binding IsPassword}" ReturnType="Done" Text="{Binding Password}"/>

        <HorizontalStackLayout Grid.Row="6" Grid.Column="0" Grid.ColumnSpan="2">
            <CheckBox IsChecked="{Binding IsPassword, Converter={StaticResource InverseBoolConverter}}"/>
            <Label Text="{Binding LocalizedTexts.P01UI06}" VerticalTextAlignment="Center" />
        </HorizontalStackLayout>

        <Button Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Text="{Binding LocalizedTexts.P01UI07}" VerticalOptions="Center"
                Margin="20" FontAttributes="Bold" CharacterSpacing="1" BackgroundColor="{Binding MainColor}" FontSize="18"
                IsEnabled="{Binding IsEnabled}" Command="{Binding LoginCommand}" >
            <Button.Shadow>
                <Shadow Brush="Black" Radius="5" Offset="0,5" Opacity="0.5"/>
            </Button.Shadow>
        </Button>

        <Button Grid.Row="8" Grid.Column="0" Text="{Binding LocalizedTexts.P01UI08}" VerticalOptions="End" Margin="0,0,0,5"
                FontAttributes="Bold" BackgroundColor="Transparent" TextColor="Blue" FontSize="16" IsEnabled="{Binding IsEnabled}"
                Command="{Binding ForgotPasswordCommand}">
            <Button.Shadow>
                <Shadow Brush="Black" Radius="5" Offset="0,0" Opacity="0.5"/>
            </Button.Shadow>
        </Button>

        <Button Grid.Row="9" Grid.Column="1" Text="{Binding LocalizedTexts.P01UI09}" VerticalOptions="End" Margin="0,0,0,5"
                FontAttributes="Bold" BackgroundColor="Transparent" TextColor="{Binding MainColor}" FontSize="16"
                IsEnabled="{Binding IsEnabled}" Command="{Binding GoToRegisterPageCommand}">
        </Button>
    </Grid>
</ContentPage>